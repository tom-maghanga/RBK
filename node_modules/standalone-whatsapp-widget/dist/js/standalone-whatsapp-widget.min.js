/*!
  * WhatsApp Widget v1.0.1 (c) 2022 - Guillermo Riojas
  * Licensed under MIT (https://github.com/griojas/standalone-whatsapp-widget.git/blob/main/LICENSE)
  * WhatsApp Widget does not affiliate with WhatsApp Inc. in any way.
  */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).WhatsAppWidget=t()}(this,(function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function i(e){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?n(Object(a),!0).forEach((function(n){t(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var a='[data-toggle="'.concat("wa-chat",'"]'),s='[data-toggle="'.concat("wa-send",'"]'),o={name:"",division:"",photo:"",introduction:"",showHeader:!1},r={name:"string",division:"string",photo:"string",introduction:"string",showHeader:"boolean"},c=[{data:"name",type:"text",required:!0},{data:"message",type:"text",required:!0}],l={data:"string",type:"string",required:"boolean"},d={},h=function(){function t(e,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d[e.id]||(this._element=e,this._config=this._getConfig(n),this._inputs=this._getInput(i),this._phoneNumber=this._element.getAttribute("action"),this._isShown=!1,this._showHeader=!1,this._toggleChat="",this._contentElement="",this._toggleSend="",this._buildHTML(),this._setEventListener(),d[e.id]=this)}var n,h,u;return n=t,(h=[{key:"toggle",value:function(){var e=this;Object.keys(d).forEach((function(t){t!==e._element.id&&d[t]._isShown&&d[t].toggle()})),this._isShown?this._hide():this._show()}},{key:"_sendMessage",value:function(){if(!/^\d+$/.test(this._phoneNumber))throw new Error("Phone number ("+this._phoneNumber+") is invalid.");for(var e=this._element.querySelectorAll("[data-message]"),t="https://wa.me/"+this._phoneNumber+"?text=",n=!0,i=0;i<e.length;i++){var a=e[i];this._formValidation(a)||(n=!1);var s=a.getAttribute("data-message");t+=s.replace(/^./,s[0].toUpperCase())+": "+a.value+"%0A"}n&&window.open(t,"_blank")}},{key:"_buildHTML",value:function(){if(this._element.innerHTML)return!1;this._verifyInput(this._inputs);var e=document.createElement("a"),t="#"+this._element.id;e.href=t,e.classList.add("wa-widget-toggle"),e.setAttribute("data-toggle","wa-chat"),e.setAttribute("data-target",t),e.innerHTML='\n          <svg viewBox="0 0 175.216 175.552" fill="rgb(79, 206, 93)" width="32" height="32">\n            <defs><linearGradient id="b" x1="85.915" x2="86.535" y1="32.567" y2="137.092" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#57d163"/><stop offset="1" stop-color="#23b33a"/></linearGradient><filter id="a" width="1.115" height="1.114" x="-.057" y="-.057" color-interpolation-filters="sRGB"><feGaussianBlur stdDeviation="3.531"/></filter></defs><path fill="#b3b3b3" d="m54.532 138.45 2.235 1.324c9.387 5.571 20.15 8.518 31.126 8.523h.023c33.707 0 61.139-27.426 61.153-61.135.006-16.335-6.349-31.696-17.895-43.251A60.75 60.75 0 0 0 87.94 25.983c-33.733 0-61.166 27.423-61.178 61.13a60.98 60.98 0 0 0 9.349 32.535l1.455 2.312-6.179 22.558zm-40.811 23.544L24.16 123.88c-6.438-11.154-9.825-23.808-9.821-36.772.017-40.556 33.021-73.55 73.578-73.55 19.681.01 38.154 7.669 52.047 21.572s21.537 32.383 21.53 52.037c-.018 40.553-33.027 73.553-73.578 73.553h-.032c-12.313-.005-24.412-3.094-35.159-8.954zm0 0" filter="url(#a)"/><path fill="#fff" d="m12.966 161.238 10.439-38.114a73.42 73.42 0 0 1-9.821-36.772c.017-40.556 33.021-73.55 73.578-73.55 19.681.01 38.154 7.669 52.047 21.572s21.537 32.383 21.53 52.037c-.018 40.553-33.027 73.553-73.578 73.553h-.032c-12.313-.005-24.412-3.094-35.159-8.954z"/><path fill="url(#linearGradient1780)" d="M87.184 25.227c-33.733 0-61.166 27.423-61.178 61.13a60.98 60.98 0 0 0 9.349 32.535l1.455 2.312-6.179 22.559 23.146-6.069 2.235 1.324c9.387 5.571 20.15 8.518 31.126 8.524h.023c33.707 0 61.14-27.426 61.153-61.135a60.75 60.75 0 0 0-17.895-43.251 60.75 60.75 0 0 0-43.235-17.929z"/><path fill="url(#b)" d="M87.184 25.227c-33.733 0-61.166 27.423-61.178 61.13a60.98 60.98 0 0 0 9.349 32.535l1.455 2.313-6.179 22.558 23.146-6.069 2.235 1.324c9.387 5.571 20.15 8.517 31.126 8.523h.023c33.707 0 61.14-27.426 61.153-61.135a60.75 60.75 0 0 0-17.895-43.251 60.75 60.75 0 0 0-43.235-17.928z"/><path fill="#fff" fill-rule="evenodd" d="M68.772 55.603c-1.378-3.061-2.828-3.123-4.137-3.176l-3.524-.043c-1.226 0-3.218.46-4.902 2.3s-6.435 6.287-6.435 15.332 6.588 17.785 7.506 19.013 12.718 20.381 31.405 27.75c15.529 6.124 18.689 4.906 22.061 4.6s10.877-4.447 12.408-8.74 1.532-7.971 1.073-8.74-1.685-1.226-3.525-2.146-10.877-5.367-12.562-5.981-2.91-.919-4.137.921-4.746 5.979-5.819 7.206-2.144 1.381-3.984.462-7.76-2.861-14.784-9.124c-5.465-4.873-9.154-10.891-10.228-12.73s-.114-2.835.808-3.751c.825-.824 1.838-2.147 2.759-3.22s1.224-1.84 1.836-3.065.307-2.301-.153-3.22-4.032-10.011-5.666-13.647"/>\n          </svg>\n        ';var n="";n=this._config.showHeader?"".concat(e.outerHTML,'\n            <div class="').concat("wa-widget-content",' chat-tab">\n                <header class="chat-header">\n                    <div class="chat-admin-picture">\n                        <img src="').concat(this._config.photo,'" alt="').concat(this._config.name,'\'s Photos">\n                    </div>\n                    <div class="chat-admin-details">\n                        <h4>').concat(this._config.name,"</h4>\n                        <p><small>").concat(this._config.division,'</small></p>\n                    </div>\n                </header>\n                <div class="chat-content">\n                    <div class="chat-item">\n                        <p>').concat(this._config.introduction,"</p>\n                    </div>\n                </div>\n                ").concat(this._buildInputs(this._inputs).outerHTML,"\n            </div>"):"".concat(e.outerHTML,'\n          <div class="').concat("wa-widget-content",' chat-tab">\n              <div class="chat-content">\n                  <div class="chat-item">\n                      <p>').concat(this._config.introduction,"</p>\n                  </div>\n              </div>\n              ").concat(this._buildInputs(this._inputs).outerHTML,"\n          </div>"),this._element.innerHTML=n}},{key:"_buildInputs",value:function(e){var t=document.createElement("div");t.classList.add("chat-form"),e.forEach((function(e){var n=document.createElement("input");n.type=e.type,n.setAttribute("data-message",e.data),n.placeholder=e.data.replace(/^./,e.data[0].toUpperCase()),n.required=e.required,t.appendChild(n)}));var n=document.createElement("button");return n.classList.add("chat-send"),n.type="submit",n.setAttribute("data-toggle","wa-send"),n.innerHTML="<strong>Send</strong>",t.appendChild(n),t}},{key:"_setEventListener",value:function(){var e=this;this._toggleChat=document.querySelector(a+'[data-target="#'+this._element.id+'"]'),this._contentElement=this._element.getElementsByClassName("wa-widget-content").item(0),this._toggleSend=this._element.querySelector(s),this._toggleChat&&this._toggleChat.addEventListener("click",(function(t){t.preventDefault(),e.toggle()})),this._toggleSend&&this._toggleSend.addEventListener("click",(function(t){t.preventDefault(),e._sendMessage()}))}},{key:"_show",value:function(){this._element.classList.add("expanded"),this._toggleChat.classList.add("expanded"),this._contentElement.classList.add("expanded"),this._isShown=!0}},{key:"_hide",value:function(){this._element.classList.remove("expanded"),this._toggleChat.classList.remove("expanded"),this._contentElement.classList.remove("expanded"),this._isShown=!1}},{key:"_formValidation",value:function(e){if(!e.required)return!0;switch(e.classList.remove("required"),e.type){case"email":if(!/^\S+@\S+$/.test(e.value))return e.classList.add("required"),!1;break;default:if(""==e.value||null==e.value)return e.classList.add("required"),!1}return!0}},{key:"_getConfig",value:function(e){return e=i(i({},o),e),this._typeCheck(e,r),e}},{key:"_getInput",value:function(e){return void 0===e||0===e.length?c:e}},{key:"_verifyInput",value:function(e){var t=this;e.forEach((function(e){t._typeCheck(e,l)}))}},{key:"_typeCheck",value:function(e,t){var n=this;Object.keys(t).forEach((function(i){var a=t[i],s=e[i],o=s&&n._isElement(s)?"element":n._toType(s);if(!new RegExp(a).test(o))throw new Error("WhatsApp Widget: "+'Option "'.concat(i,'" provided type "').concat(o,'" ')+'but expected type "'.concat(a,'".'))}))}},{key:"_isElement",value:function(e){(e[0]||e).nodeType}},{key:"_toType",value:function(e){return null==e?"".concat(e):{}.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase()}}])&&e(n.prototype,h),u&&e(n,u),t}();return document.body.onload=function(){for(var e=document.querySelectorAll("[data-chat]"),t=0;t<e.length;t++){var n=e[t];new h(n,{},[])}},h}));